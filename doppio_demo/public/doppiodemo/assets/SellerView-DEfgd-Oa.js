var k=(d,g,f)=>new Promise((x,p)=>{var y=s=>{try{a(f.next(s))}catch(c){p(c)}},v=s=>{try{a(f.throw(s))}catch(c){p(c)}},a=s=>s.done?x(s.value):Promise.resolve(s.value).then(y,v);a((f=f.apply(d,g)).next())});import{u as T,x as I,o as r,c as n,a as e,d as u,n as w,t as l,_ as L,i as R,j,k as b,s as h,l as C,F as S,p as $,r as D,q as O}from"./index-DScAjRzo.js";import{T as V}from"./Toast-C1d1Xy6g.js";const A={class:"h-full flex flex-col bg-white border-r border-gray-200 text-gray-700 font-sans"},z={class:"h-14 flex items-center bg-orange-600 text-white shrink-0 px-4 justify-between"},E={class:"flex items-center gap-2 font-bold text-base tracking-wide"},B={key:0},F={class:"flex-1 overflow-y-auto py-2"},q={class:"space-y-1"},G={key:0,class:"ml-3 font-medium"},U={key:0,class:"ml-3 font-medium"},J={key:1,class:"ml-auto bg-red-500 text-white text-[10px] px-2 py-0.5 rounded-full"},Q={key:0,class:"ml-3 font-medium"},H={class:"p-3 border-t border-gray-200 bg-gray-50"},K={key:0},W={__name:"SellerSidebar",props:["isCollapsed","newOrderCount"],emits:["close-mobile","logout"],setup(d,{emit:g}){const f=g,x=T(),p=I(),y=a=>{x.push({name:a}),f("close-mobile")},v=a=>p.name===a;return(a,s)=>(r(),n("div",A,[e("div",z,[e("div",E,[s[5]||(s[5]=e("span",{class:"text-xl"},"ðŸª",-1)),d.isCollapsed?u("",!0):(r(),n("span",B,"Seller Panel"))]),e("button",{onClick:s[0]||(s[0]=c=>a.$emit("close-mobile")),class:"lg:hidden text-white"},"âœ•")]),e("div",F,[e("nav",q,[e("button",{onClick:s[1]||(s[1]=c=>y("SellerDashboard")),class:w(["w-full flex items-center px-4 py-3 hover:bg-orange-50 transition-colors group",v("SellerDashboard")?"bg-orange-50 text-orange-700 border-r-4 border-orange-600":"text-gray-600"])},[s[6]||(s[6]=e("span",{class:"text-xl"},"ðŸ“Š",-1)),d.isCollapsed?u("",!0):(r(),n("span",G,"Dashboard"))],2),e("button",{onClick:s[2]||(s[2]=c=>y("SellerOrders")),class:w(["w-full flex items-center px-4 py-3 hover:bg-orange-50 transition-colors group",v("SellerOrders")?"bg-orange-50 text-orange-700 border-r-4 border-orange-600":"text-gray-600"])},[s[7]||(s[7]=e("span",{class:"text-xl"},"ðŸ“¦",-1)),d.isCollapsed?u("",!0):(r(),n("span",U,"Orders")),!d.isCollapsed&&d.newOrderCount>0?(r(),n("span",J,l(d.newOrderCount),1)):u("",!0)],2),e("button",{onClick:s[3]||(s[3]=c=>y("SellerProducts")),class:w(["w-full flex items-center px-4 py-3 hover:bg-orange-50 transition-colors group",v("SellerProducts")?"bg-orange-50 text-orange-700 border-r-4 border-orange-600":"text-gray-600"])},[s[8]||(s[8]=e("span",{class:"text-xl"},"ðŸ·ï¸",-1)),d.isCollapsed?u("",!0):(r(),n("span",Q,"My Products"))],2)])]),e("div",H,[e("button",{onClick:s[4]||(s[4]=c=>a.$emit("logout")),class:"w-full flex items-center justify-center gap-2 text-red-600 font-bold text-xs hover:bg-red-50 py-2 rounded"},[s[9]||(s[9]=e("span",null,"ðŸ”´",-1)),d.isCollapsed?u("",!0):(r(),n("span",K,"Logout"))])])]))}},X={class:"flex h-screen bg-gray-50 overflow-hidden relative font-sans text-gray-900"},Y={class:"flex-1 flex flex-col min-w-0 h-full w-full relative"},Z={class:"bg-white border-b border-gray-200 h-16 flex items-center justify-between px-6 sticky top-0 z-30 shadow-sm"},ee={class:"flex items-center gap-3"},te={class:"font-bold text-gray-800 text-xl tracking-tight"},se={class:"flex items-center gap-4"},oe={class:"hidden md:flex flex-col items-end"},re={class:"text-sm font-bold text-gray-800"},ne={class:"h-10 w-10 bg-orange-100 rounded-full flex items-center justify-center text-orange-600 font-bold border-2 border-white shadow-sm"},ae={class:"flex-1 overflow-y-auto p-4 sm:p-8 custom-scrollbar bg-gray-50/50"},le={key:0,class:"grid grid-cols-1 md:grid-cols-3 gap-6 animate-fade-in"},de={class:"bg-white p-6 rounded-2xl border border-gray-100 shadow-sm hover:shadow-md transition-shadow relative overflow-hidden"},ie={class:"text-4xl font-black text-gray-900 mt-2"},ue={class:"bg-white p-6 rounded-2xl border border-gray-100 shadow-sm hover:shadow-md transition-shadow relative overflow-hidden"},ce={class:"text-4xl font-black text-gray-900 mt-2"},ge={key:1,class:"max-w-6xl mx-auto space-y-6 animate-fade-in"},xe={key:0,class:"space-y-4"},pe={key:1,class:"text-center py-20 bg-white rounded-2xl border border-dashed border-gray-300"},be={class:"bg-gray-50/80 px-6 py-4 border-b border-gray-100 flex flex-wrap justify-between items-center gap-4"},fe={class:"flex items-center gap-3"},me={class:"font-black text-lg text-gray-800"},ye={class:"text-xs text-gray-400 font-mono"},ve={class:"text-sm text-gray-500 mt-1 font-medium"},he={class:"flex items-center gap-4"},we={class:"text-right"},_e={class:"font-black text-lg"},ke={class:"p-6"},Ce={class:"space-y-3"},Se={class:"flex items-center gap-3"},$e={class:"bg-gray-100 text-gray-600 font-bold text-xs px-2 py-1 rounded h-fit"},Oe={class:"text-sm font-medium text-gray-700"},Pe={class:"font-bold text-sm text-gray-900"},je={key:0,class:"px-6 py-4 bg-gray-50 border-t border-gray-100 flex justify-end gap-3"},De=["onClick"],Te=["onClick"],Ie={key:2,class:"flex flex-col items-center justify-center h-[60vh]"},Me={__name:"SellerView",setup(d){const g=I(),f=T(),x=D(!1),p=D(null),y=()=>h.user?h.user.substring(0,2).toUpperCase():"SE",v=O(()=>g.name==="SellerOrders"?"Order Management":g.name==="SellerProducts"?"Inventory":"Dashboard Overview"),a=R({url:"doppio_demo.api.get_seller_orders",auto:!0}),s=O(()=>a.data?a.data.filter(i=>["Pending","Draft"].includes(i.status)).length:0),c=O(()=>{if(!a.data)return 0;const i=new Date().toISOString().split("T")[0];return a.data.filter(t=>t.transaction_date===i&&t.status!=="Cancelled").reduce((t,o)=>t+o.grand_total,0)}),P=(i,t)=>k(this,null,function*(){var o;try{const _=yield(yield fetch("/api/method/doppio_demo.api.update_order_status",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({order_name:i,status:t})})).json();_.message&&_.message.status==="success"?(p.value.add(`Order status updated to ${t}`,"success"),a.fetch()):p.value.add("Error: "+(((o=_.message)==null?void 0:o.message)||"Failed"),"error")}catch(m){p.value.add("Network Error","error")}}),M=i=>["Pending","Draft"].includes(i)?"bg-yellow-50 text-yellow-700 border-yellow-200 ring-1 ring-yellow-100":i==="Completed"?"bg-green-50 text-green-700 border-green-200 ring-1 ring-green-100":i==="Processing"?"bg-blue-50 text-blue-700 border-blue-200 ring-1 ring-blue-100":"bg-gray-50 text-gray-600 border-gray-200",N=()=>k(this,null,function*(){try{yield fetch("/api/method/logout",{method:"POST"}),h.isLoggedIn=!1,h.role=null,window.location.href="/login"}catch(i){window.location.href="/login"}});return(i,t)=>(r(),n("div",X,[x.value?(r(),n("div",{key:0,onClick:t[0]||(t[0]=o=>x.value=!1),class:"fixed inset-0 bg-black/60 z-40 lg:hidden backdrop-blur-sm transition-opacity"})):u("",!0),e("div",{class:w(["fixed lg:static inset-y-0 left-0 z-50 bg-white shadow-2xl lg:shadow-none transform transition-all duration-300 ease-in-out h-full border-r border-gray-200",[x.value?"translate-x-0":"-translate-x-full lg:translate-x-0","w-64"]])},[j(W,{isCollapsed:!1,newOrderCount:s.value,onCloseMobile:t[1]||(t[1]=o=>x.value=!1),onLogout:N},null,8,["newOrderCount"])],2),e("div",Y,[e("header",Z,[e("div",ee,[e("button",{onClick:t[2]||(t[2]=o=>x.value=!0),class:"lg:hidden text-xl p-2 hover:bg-gray-100 rounded-md"},"â˜°"),e("h1",te,l(v.value),1)]),e("div",se,[e("div",oe,[t[4]||(t[4]=e("span",{class:"text-xs font-bold text-gray-400 uppercase tracking-wider"},"Store",-1)),e("span",re,l(b(h).sellerCompany||"Loading..."),1)]),e("div",ne,l(y()),1)])]),e("div",ae,[b(g).name==="SellerDashboard"?(r(),n("div",le,[e("div",de,[t[5]||(t[5]=e("div",{class:"absolute top-0 right-0 p-4 opacity-10 text-6xl"},"â³",-1)),t[6]||(t[6]=e("h3",{class:"text-gray-400 text-xs font-bold uppercase tracking-wider"},"Pending Orders",-1)),e("p",ie,l(s.value),1),t[7]||(t[7]=e("p",{class:"text-xs text-orange-500 font-medium mt-2"},"Action needed",-1))]),e("div",ue,[t[8]||(t[8]=e("div",{class:"absolute top-0 right-0 p-4 opacity-10 text-6xl"},"ðŸ’°",-1)),t[9]||(t[9]=e("h3",{class:"text-gray-400 text-xs font-bold uppercase tracking-wider"},"Today's Revenue",-1)),e("p",ce,"â‚¹"+l(c.value),1),t[10]||(t[10]=e("p",{class:"text-xs text-green-500 font-medium mt-2"},"Gross Sales",-1))]),e("div",{class:"bg-gradient-to-br from-gray-900 to-black p-6 rounded-2xl text-white shadow-lg relative overflow-hidden group cursor-pointer",onClick:t[3]||(t[3]=o=>b(f).push({name:"SellerProducts"}))},[...t[11]||(t[11]=[e("h3",{class:"text-gray-400 text-xs font-bold uppercase tracking-wider"},"Quick Action",-1),e("p",{class:"text-xl font-bold mt-2"},"Manage Products",-1),e("div",{class:"mt-4 flex items-center gap-2 text-sm font-medium text-gray-300 group-hover:text-white transition-colors"},[e("span",null,"Go to Inventory"),C(),e("span",null,"â†’")],-1)])])])):b(g).name==="SellerOrders"?(r(),n("div",ge,[b(a).loading?(r(),n("div",xe,[(r(),n(S,null,$(3,o=>e("div",{key:o,class:"h-40 bg-white rounded-xl animate-pulse"})),64))])):!b(a).data||!b(a).data.length?(r(),n("div",pe,[...t[12]||(t[12]=[e("div",{class:"text-6xl mb-4 grayscale opacity-20"},"ðŸ“¦",-1),e("p",{class:"text-gray-400 font-bold"},"No orders received yet.",-1)])])):(r(!0),n(S,{key:2},$(b(a).data,o=>(r(),n("div",{key:o.name,class:"bg-white rounded-2xl border border-gray-200 overflow-hidden shadow-sm hover:shadow-md transition-all"},[e("div",be,[e("div",null,[e("div",fe,[e("span",me,"#"+l(o.name),1),e("span",ye,l(o.transaction_date),1)]),e("p",ve,"ðŸ‘¤ "+l(o.customer_name),1)]),e("div",he,[e("div",we,[t[13]||(t[13]=e("span",{class:"block text-[10px] font-bold text-gray-400 uppercase"},"Total Amount",-1)),e("span",_e,"â‚¹"+l(o.grand_total),1)]),e("span",{class:w([M(o.status),"px-3 py-1 rounded-full text-[11px] font-bold uppercase border tracking-wide"])},l(o.status),3)])]),e("div",ke,[e("div",Ce,[(r(!0),n(S,null,$(o.items,m=>(r(),n("div",{key:m.item_code,class:"flex justify-between items-center py-2 border-b border-dashed border-gray-100 last:border-0 last:pb-0"},[e("div",Se,[e("span",$e,l(m.qty)+"x",1),e("span",Oe,l(m.item_name),1)]),e("span",Pe,"â‚¹"+l(m.amount),1)]))),128))])]),["Pending","Draft","Processing"].includes(o.status)?(r(),n("div",je,[["Pending","Draft"].includes(o.status)?(r(),n("button",{key:0,onClick:m=>P(o.name,"Processing"),class:"bg-blue-600 hover:bg-blue-700 text-white px-5 py-2 rounded-lg text-xs font-bold uppercase shadow-sm transition-transform active:scale-95 flex items-center gap-2"},[...t[14]||(t[14]=[e("span",null,"âœ”",-1),C(" Accept Order ",-1)])],8,De)):u("",!0),o.status==="Processing"?(r(),n("button",{key:1,onClick:m=>P(o.name,"Completed"),class:"bg-green-600 hover:bg-green-700 text-white px-5 py-2 rounded-lg text-xs font-bold uppercase shadow-sm transition-transform active:scale-95 flex items-center gap-2"},[...t[15]||(t[15]=[e("span",null,"ðŸšš",-1),C(" Mark Delivered ",-1)])],8,Te)):u("",!0)])):u("",!0)]))),128))])):b(g).name==="SellerProducts"?(r(),n("div",Ie,[...t[16]||(t[16]=[e("div",{class:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center text-4xl mb-4"},"ðŸš§",-1),e("h2",{class:"text-xl font-bold text-gray-800"},"Inventory Management",-1),e("p",{class:"text-gray-500 mt-2"},"This module is under construction.",-1)])])):u("",!0)])]),j(V,{ref_key:"toastRef",ref:p},null,512)]))}},Ve=L(Me,[["__scopeId","data-v-83c94ebe"]]);export{Ve as default};
//# sourceMappingURL=SellerView-DEfgd-Oa.js.map

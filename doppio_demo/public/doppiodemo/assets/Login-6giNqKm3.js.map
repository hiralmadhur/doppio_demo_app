{"version":3,"file":"Login-6giNqKm3.js","sources":["../../../../doppiodemo/src/pages/Login.vue"],"sourcesContent":["<template>\n  <div class=\"min-h-screen flex items-center justify-center bg-gray-50\">\n    <div class=\"bg-white p-8 rounded-xl shadow-lg w-full max-w-md border border-gray-100\">\n      <div class=\"text-center mb-8\">\n        <div class=\"text-4xl mb-2\">üõçÔ∏è</div>\n        <h2 class=\"text-2xl font-extrabold text-gray-900\">Welcome Back</h2>\n        <p class=\"text-sm text-gray-500\">Sign in to manage orders or shop</p>\n      </div>\n\n      <form @submit.prevent=\"login\" class=\"space-y-5\">\n        <div>\n          <label class=\"block text-gray-700 text-xs font-bold mb-2 uppercase tracking-wide\">Email / Username</label>\n          <input v-model=\"email\" type=\"text\" class=\"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:border-orange-500 focus:ring-2 focus:ring-orange-100 transition-all\" required placeholder=\"Enter your ID\">\n        </div>\n        <div>\n          <label class=\"block text-gray-700 text-xs font-bold mb-2 uppercase tracking-wide\">Password</label>\n          <input v-model=\"password\" type=\"password\" class=\"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:border-orange-500 focus:ring-2 focus:ring-orange-100 transition-all\" required placeholder=\"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢\">\n        </div>\n        \n        <button type=\"submit\" :disabled=\"loading\" \n          class=\"w-full bg-gray-900 text-white font-bold py-3.5 rounded-lg hover:bg-black transition-all shadow-lg active:scale-95 flex justify-center items-center gap-2\">\n          <span v-if=\"loading\" class=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\"></span>\n          <span>{{ loading ? 'Authenticating...' : 'Sign In' }}</span>\n        </button>\n      </form>\n\n      <p v-if=\"error\" class=\"text-red-500 text-sm mt-4 text-center bg-red-50 py-2 rounded border border-red-100 font-medium\">\n        {{ error }}\n      </p>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { session } from '../data/session'\n\nconst router = useRouter()\nconst email = ref('')\nconst password = ref('')\nconst error = ref('')\nconst loading = ref(false)\n\nconst login = async () => {\n    loading.value = true\n    error.value = ''\n    try {\n        // 1. Basic Login\n        const res = await fetch('/api/method/login', {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({ usr: email.value, pwd: password.value })\n        })\n        const data = await res.json()\n\n        if (data.message === 'Logged In') {\n            session.isLoggedIn = true\n            session.user = email.value\n            \n            // 2. Role Check (API Call)\n            const roleRes = await fetch('/api/method/doppio_demo.api.get_user_role_info')\n            const roleData = await roleRes.json()\n\n            if (roleData.message) {\n                const info = roleData.message\n                session.role = info.role\n                \n                if (info.role === 'Seller') {\n                    session.sellerCompany = info.company\n                    router.push({ name: 'SellerDashboard' })\n                } else {\n                    router.push({ name: 'Home' })\n                }\n            }\n        } else {\n            error.value = data.message || \"Invalid Credentials\"\n        }\n    } catch (e) {\n        error.value = \"Network Error: \" + e.message\n    } finally {\n        loading.value = false\n    }\n}\n</script>"],"names":["router","useRouter","email","ref","password","error","loading","login","__async","data","session","roleData","info","e","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_cache","$event","_hoisted_4","_hoisted_5","_toDisplayString"],"mappings":"qtBAsCA,MAAMA,EAASC,EAAS,EAClBC,EAAQC,EAAI,EAAE,EACdC,EAAWD,EAAI,EAAE,EACjBE,EAAQF,EAAI,EAAE,EACdG,EAAUH,EAAI,EAAK,EAEnBI,EAAQ,IAAYC,EAAA,sBACtBF,EAAQ,MAAQ,GAChBD,EAAM,MAAQ,GACd,GAAI,CAOA,MAAMI,EAAO,MALD,MAAM,MAAM,oBAAqB,CACzC,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAkB,EAC7C,KAAM,KAAK,UAAU,CAAE,IAAKP,EAAM,MAAO,IAAKE,EAAS,KAAK,CAAE,CAC1E,CAAS,GACsB,KAAI,EAE3B,GAAIK,EAAK,UAAY,YAAa,CAC9BC,EAAQ,WAAa,GACrBA,EAAQ,KAAOR,EAAM,MAIrB,MAAMS,EAAW,MADD,MAAM,MAAM,gDAAgD,GAC7C,KAAI,EAEnC,GAAIA,EAAS,QAAS,CAClB,MAAMC,EAAOD,EAAS,QACtBD,EAAQ,KAAOE,EAAK,KAEhBA,EAAK,OAAS,UACdF,EAAQ,cAAgBE,EAAK,QAC7BZ,EAAO,KAAK,CAAE,KAAM,iBAAiB,CAAE,GAEvCA,EAAO,KAAK,CAAE,KAAM,MAAM,CAAE,CAEpC,CACJ,MACIK,EAAM,MAAQI,EAAK,SAAW,qBAEtC,OAASI,EAAG,CACRR,EAAM,MAAQ,kBAAoBQ,EAAE,OACxC,QAAC,CACGP,EAAQ,MAAQ,EACpB,CACJ,iBAlFEQ,EAAA,EAAAC,EA6BM,MA7BNC,EA6BM,CA5BJC,EA2BM,MA3BNC,EA2BM,aA1BJD,EAIM,MAAA,CAJD,MAAM,oBAAkB,CAC3BA,EAAoC,MAAA,CAA/B,MAAM,eAAe,EAAC,KAAG,EAC9BA,EAAmE,KAAA,CAA/D,MAAM,uCAAuC,EAAC,cAAY,EAC9DA,EAAqE,IAAA,CAAlE,MAAM,uBAAuB,EAAC,kCAAgC,QAGnEA,EAeO,OAAA,CAfA,WAAgBV,EAAK,CAAA,SAAA,CAAA,EAAE,MAAM,cAClCU,EAGM,MAAA,KAAA,CAFJE,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAF,EAA0G,QAAA,CAAnG,MAAM,oEAAoE,EAAC,mBAAgB,EAAA,KAClGA,EAA2O,QAAA,sCAA3Nf,EAAK,MAAAkB,GAAE,KAAK,OAAO,MAAM,6JAA6J,SAAA,GAAS,YAAY,+BAA3MlB,EAAA,KAAK,MAEvBe,EAGM,MAAA,KAAA,CAFJE,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAF,EAAkG,QAAA,CAA3F,MAAM,oEAAoE,EAAC,WAAQ,EAAA,KAC1FA,EAA6O,QAAA,sCAA7Nb,EAAQ,MAAAgB,GAAE,KAAK,WAAW,MAAM,6JAA6J,SAAA,GAAS,YAAY,0BAAlNhB,EAAA,KAAQ,MAG1Ba,EAIS,SAAA,CAJD,KAAK,SAAU,SAAUX,EAAA,MAC/B,MAAM,6JACMA,EAAA,OAAZQ,IAAAC,EAAiH,OAAjHM,CAAiH,YACjHJ,EAA4D,cAAnDX,EAAA,MAAO,oBAAA,SAAA,EAAA,CAAA,aAIXD,EAAA,WAATU,EAEI,IAFJO,EAEIC,EADClB,EAAA,KAAK,EAAA,CAAA"}
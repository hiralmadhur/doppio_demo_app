{"version":3,"file":"Login-C--EKYop.js","sources":["../../../../doppiodemo/src/pages/Login.vue"],"sourcesContent":["<template>\n  <div class=\"min-h-screen flex items-center justify-center bg-gray-50 px-4\">\n    <div class=\"max-w-md w-full bg-white rounded-2xl shadow-xl p-8 border border-gray-100\">\n      \n      <div class=\"text-center mb-8\">\n        <div class=\"text-6xl mb-4\">ðŸ›’</div>\n        <h2 class=\"text-3xl font-extrabold text-gray-900\">Welcome Back</h2>\n        <p class=\"text-sm text-gray-500 mt-2\">Sign in to access your dashboard</p>\n      </div>\n\n      <form @submit.prevent=\"handleLogin\" class=\"space-y-6\">\n        <div>\n          <label class=\"block text-sm font-medium text-gray-700 mb-1\">Email Address</label>\n          <input v-model=\"email\" type=\"email\" required \n            class=\"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-orange-500 focus:border-orange-500 outline-none transition-all\"\n            placeholder=\"user@example.com\" />\n        </div>\n\n        <div>\n          <label class=\"block text-sm font-medium text-gray-700 mb-1\">Password</label>\n          <input v-model=\"password\" type=\"password\" required \n            class=\"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-orange-500 focus:border-orange-500 outline-none transition-all\"\n            placeholder=\"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢\" />\n        </div>\n\n        <div v-if=\"errorMessage\" class=\"text-red-500 text-sm text-center font-bold bg-red-50 p-2 rounded\">\n          {{ errorMessage }}\n        </div>\n\n        <button type=\"submit\" :disabled=\"loading\"\n          class=\"w-full bg-gray-900 text-white py-3.5 rounded-xl font-bold text-lg hover:bg-black transition-all shadow-lg active:scale-95 flex justify-center items-center gap-2\">\n          <span v-if=\"loading\" class=\"w-5 h-5 border-2 border-white/50 border-t-white rounded-full animate-spin\"></span>\n          <span>{{ loading ? 'Signing In...' : 'Login' }}</span>\n        </button>\n      </form>\n\n      <div class=\"mt-6 text-center\">\n        <p class=\"text-xs text-gray-400\">By logging in, you agree to our Terms & Conditions.</p>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { session } from '../data/session'\n\nconst router = useRouter()\nconst email = ref('')\nconst password = ref('')\nconst errorMessage = ref('')\nconst loading = ref(false)\n\nconst handleLogin = async () => {\n  loading.value = true\n  errorMessage.value = ''\n  \n  try {\n    // 1. Login Call\n    await session.login.submit({ email: email.value, password: password.value })\n    \n    // 2. Fetch Role Info\n    const res = await fetch('/api/method/doppio_demo.api.get_user_role_info')\n    const data = await res.json()\n    \n    if (data.message) {\n        session.role = data.message.role\n        session.sellerCompany = data.message.company\n        \n        // 3. Redirect Based on Role\n        if (data.message.role === 'Seller') {\n            router.push({ name: 'SellerDashboard' })\n        } else {\n            router.push({ name: 'Home' })\n        }\n    }\n  } catch (e) {\n    errorMessage.value = \"Invalid Email or Password\"\n    console.error(e)\n  } finally {\n    loading.value = false\n  }\n}\n</script>"],"names":["router","useRouter","email","ref","password","errorMessage","loading","handleLogin","__async","session","data","e","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_cache","$event","_hoisted_3","_toDisplayString","_hoisted_5"],"mappings":"qrBAgDA,MAAMA,EAASC,EAAS,EAClBC,EAAQC,EAAI,EAAE,EACdC,EAAWD,EAAI,EAAE,EACjBE,EAAeF,EAAI,EAAE,EACrBG,EAAUH,EAAI,EAAK,EAEnBI,EAAc,IAAYC,EAAA,sBAC9BF,EAAQ,MAAQ,GAChBD,EAAa,MAAQ,GAErB,GAAI,CAEF,MAAMI,EAAQ,MAAM,OAAO,CAAE,MAAOP,EAAM,MAAO,SAAUE,EAAS,KAAK,CAAE,EAI3E,MAAMM,EAAO,MADD,MAAM,MAAM,gDAAgD,GACjD,KAAI,EAEvBA,EAAK,UACLD,EAAQ,KAAOC,EAAK,QAAQ,KAC5BD,EAAQ,cAAgBC,EAAK,QAAQ,QAGjCA,EAAK,QAAQ,OAAS,SACtBV,EAAO,KAAK,CAAE,KAAM,iBAAiB,CAAE,EAEvCA,EAAO,KAAK,CAAE,KAAM,MAAM,CAAE,EAGtC,OAASW,EAAG,CACVN,EAAa,MAAQ,4BACrB,QAAQ,MAAMM,CAAC,CACjB,QAAC,CACCL,EAAQ,MAAQ,EAClB,CACF,iBAlFEM,EAAA,EAAAC,EAuCM,MAvCNC,EAuCM,CAtCJC,EAqCM,MArCNC,EAqCM,aAnCJD,EAIM,MAAA,CAJD,MAAM,oBAAkB,CAC3BA,EAAmC,MAAA,CAA9B,MAAM,eAAe,EAAC,IAAE,EAC7BA,EAAmE,KAAA,CAA/D,MAAM,uCAAuC,EAAC,cAAY,EAC9DA,EAA0E,IAAA,CAAvE,MAAM,4BAA4B,EAAC,kCAAgC,QAGxEA,EAwBO,OAAA,CAxBA,WAAgBR,EAAW,CAAA,SAAA,CAAA,EAAE,MAAM,cACxCQ,EAKM,MAAA,KAAA,CAJJE,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAF,EAAiF,QAAA,CAA1E,MAAM,8CAA8C,EAAC,gBAAa,EAAA,KACzEA,EAEmC,QAAA,sCAFnBb,EAAK,MAAAgB,GAAE,KAAK,QAAQ,SAAA,GAClC,MAAM,4IACN,YAAY,kCAFEhB,EAAA,KAAK,MAKvBa,EAKM,MAAA,KAAA,CAJJE,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAF,EAA4E,QAAA,CAArE,MAAM,8CAA8C,EAAC,WAAQ,EAAA,KACpEA,EAE2B,QAAA,sCAFXX,EAAQ,MAAAc,GAAE,KAAK,WAAW,SAAA,GACxC,MAAM,4IACN,YAAY,0BAFEd,EAAA,KAAQ,MAKfC,EAAA,WAAXQ,EAEM,MAFNM,EAEMC,EADDf,EAAA,KAAY,EAAA,CAAA,YAGjBU,EAIS,SAAA,CAJD,KAAK,SAAU,SAAUT,EAAA,MAC/B,MAAM,qKACMA,EAAA,OAAZM,IAAAC,EAA8G,OAA9GQ,CAA8G,YAC9GN,EAAsD,cAA7CT,EAAA,MAAO,gBAAA,OAAA,EAAA,CAAA,yBAIpBS,EAEM,MAAA,CAFD,MAAM,oBAAkB,CAC3BA,EAAwF,IAAA,CAArF,MAAM,uBAAuB,EAAC,qDAAmD"}